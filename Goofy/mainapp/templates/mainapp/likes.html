{% extends "mainapp/base.html" %}
{% load static %}


{% block title %}Likes{% endblock title %}
{% block content %}
<div id="allelements" class="pt-8 flex flex-col ml-2 sm:ml-[100px] ">

    <div class="flex-col poppins-regular mt-16 ">

        <div id="liked-head" class="flex-col text-white w-[98%]">
            <div class="text-[30px]">Your Likes</div>
            <div class="text-[20px]">Your liked music will be displayed here</div>
        </div>
        
        <div id="liked-content" class="">

            <div class="text-white flex w-[98%] justify-between">
                <div class="flex space-x-5">
                    <div class="text-[30px]">Your Likes</div>
                    <button class="text-[20px] font-bold pt-2 hover:text-gray-500 hover:scale-110">Show all</button>
                </div>
                <div id="scrollnavbtn" class="flex">
                    <button class="hover:scale-110" onclick="horizontalscroll(true,'likegrid')">
                        <div class="m-1"><img src="{% static 'mainapp/homepageassets/larrow.svg' %}" alt=""></div>
                    </button>
                    <button class="hover:scale-110" onclick="horizontalscroll(false,'likegrid')">
                        <div class="m-1"><img src="{% static 'mainapp/homepageassets/rarrow.svg' %}" alt=""></div>
                    </button>
                </div>
            </div>
    
            <div id="likegrid"
                class="scrollbar  sm:hover:overflow-x-scroll sm:overflow-hidden h-64  w-[98%] pt-4 pl-3 grid grid-flow-col auto-cols-auto scroll-smooth space-x-5 ">
             
            </div>
        </div>

    </div>
</div>
{% endblock content %}
{% block script %}
<script>
    $('#homebox').removeClass('hover:border-l-[#5398C9]').addClass('hover:border-l-white');
    $('#explorebox').removeClass('hover:border-l-[#5398C9]').addClass('hover:border-l-white');
    $('#librarybox').removeClass('hover:border-l-[#5398C9]').addClass('hover:border-l-white');
    $('#likedsongsbox').removeClass('hover:border-l-[#5398C9]').addClass('hover:border-l-white');
    $('#profilebox').removeClass('hover:border-l-[#5398C9]').addClass('hover:border-l-white');
    $('#lchild').removeClass("bg-transparent");
    $('#lchild').addClass("gradnav");
</script>
<script>
    $.ajax({
        url: "{% url 'getlikedsongs' %}",
        type: "GET",
        success: function(response)
        {
            if (response.likedata) {
                $("#liked-head").addClass("hidden");
                response.likedata.forEach(song => {
                    $("#likegrid").append(`
                    <button class="hover:scale-110">
                    <div class="w-40 ">
                        <img src="${song.thumbnail}" alt="">
                    </div>
                    <div class="text-white w-40 pt-1 text-container">
                        <span class="text-white animated-text w-40 title-text">
                            ${song.title}
                        </span>
                    </div>
                    <div class="text-white w-40 h-[25px] text-container">
                        <span class="text-white w-40 h-[25px] animated-text artist-text">
                            ${song.author}
                        </span>
                    </div>
                </button>
                    `);
                });
            }
            else{
                $("#liked-content").addClass("hidden");
            }
        }
    })

</script>
{% endblock script %}